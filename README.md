# Text Document Chunking and Question Answering Application

## Server Overview
This application enables users to import various types of documents (e.g., txt, pdf, docs, csv), split them into chunks, generate embeddings for each chunk using OpenAI's text-embedding-3-small model, and store them in a vector database. Users can then query the database by providing a text prompt of up to 500 characters, which will be compared with the stored embeddings to retrieve the most similar chunks. The retrieved chunks are then concatenated and passed to the GPT-3.5 model to generate an answer.

## Features
- **Document Import:** Import documents of various formats.
- **Chunking:** Split documents into chunks of 500 characters with a 100-character overlap.
- **Embedding Generation:** Generate embeddings for each chunk using OpenAI's text-embedding-3-small model.
- **Vector Database:** Store embeddings, chunk text, chunk ID, and document ID in a vector database (e.g., Milvus).
- **Similarity Search:** Compare input text embeddings with stored embeddings to retrieve similar chunks.
- **Question Answering:** Utilize GPT-3.5 model to answer questions based on retrieved chunks.

## Installation Guide
1. Install required Python packages:
   ```
   pip install -r requirements.txt
   ```
2. Install Milvus database (lite version):
   - Follow the installation instructions provided by Milvus for the lite version.

## Usage
1. **Load Application:**
   - Endpoint: `<api>/load_app`
   - Description: Load the database and initialize OpenAI models.
   - Method: GET

2. **Add Document:**
   - Endpoint: `<api>/add_document`
   - Description: Add a document to the database.
   - Method: POST
   - Input: JSON with the path to the document file (e.g., {"file": "path/to/document.pdf"}).

3. **Ask Question:**
   - Endpoint: `<api>/ask_question`
   - Description: Ask a question or provide text input to retrieve an answer.
   - Method: POST
   - Input: JSON with the text prompt or question (e.g., {"prompt": "What are the key points?"}).
   - Output: JSON response containing the output text from GPT-3.5.


## Note
- Ensure the Milvus database is running before using the application.
- Provide valid file paths when adding documents.
- Keep input text prompts within 500 characters for accurate results.
- Adjust configurations and parameters as needed in the code.

This application provides a convenient way to process documents, retrieve relevant information, and generate answers to questions using state-of-the-art NLP and vector database technologies.

---

# Client-Side Functions Overview

## Overview
The `client.py` file in this project serves as a client application to interact with the Flask server hosting the text document chunking and question answering application. It provides a command-line interface (CLI) for users to send requests to the server, such as loading the application, adding documents, and asking questions.

## Features
- **Load Application:** Initialize the text document chunking and question answering application on the server.
- **Add Document:** Add a document to the server for processing and storage.
- **Ask Question:** Send a text prompt or question to the server and receive an answer generated by the GPT-3.5 model.

## Usage
1. **Load Application:**
   - Command: `load` or `load empty`
   - Description: Load the text document chunking and question answering application on the server. Optionally, specify `empty` to clear the database before loading.

2. **Add Document:**
   - Command: `add folderPath`
   - Description: Add a document or multiple documents from the specified folder to the server for processing.
   - Example: `add documents`

3. **Ask Question:**
   - Command: `ask question`
   - Description: Ask a question or provide a text prompt to the server to generate an answer using the GPT-3.5 model.
   - Example: `ask What are the key points?`

4. **Quit:**
   - Command: `end`
   - Description: Quit the client application.

## Prerequisites
- Ensure the Flask server hosting the text document chunking and question answering application is running.
- Make sure the server's API endpoints are accessible from the client.

## Sample Usage
```
________________________________________________________________________________________________
Enter the command:
        - 'load' or 'load empty'
                        'load': for setup database
                        'load empty': for emptying and setup database.
        - 'add folderPath' (e.g., add foldername)
                        'folderPath is the folder that contains the files you want to import into the database․
        - 'ask question' (e.g., 'ask Что необходимо проверить при сверке по счетам 62.02 и 76.АВ?')
                        'question: your question
        - 'end: for quit'
________________________________________________________________________________________________
: load empty
```
```
________________________________________________________________________________________________
Enter the command:
        - 'load' or 'load empty'
                        'load': for setup database
                        'load empty': for emptying and setup database.
        - 'add folderPath' (e.g., add foldername)
                        'folderPath is the folder that contains the files you want to import into the database․
        - 'ask question' (e.g., 'ask Что необходимо проверить при сверке по счетам 62.02 и 76.АВ?')
                        'question: your question
        - 'end: for quit'
________________________________________________________________________________________________
: add files
```
```
________________________________________________________________________________________________
Enter the command:
        - 'load' or 'load empty'
                        'load': for setup database
                        'load empty': for emptying and setup database.
        - 'add folderPath' (e.g., add foldername)
                        'folderPath is the folder that contains the files you want to import into the database․
        - 'ask question' (e.g., 'ask Что необходимо проверить при сверке по счетам 62.02 и 76.АВ?')
                        'question: your question
        - 'end: for quit'
________________________________________________________________________________________________
: ask Что необходимо проверить при сверке по счетам 62.02 и 76.АВ?
```
```
________________________________________________________________________________________________
Enter the command:
        - 'load' or 'load empty'
                        'load': for setup database
                        'load empty': for emptying and setup database.
        - 'add folderPath' (e.g., add foldername)
                        'folderPath is the folder that contains the files you want to import into the database․
        - 'ask question' (e.g., 'ask Что необходимо проверить при сверке по счетам 62.02 и 76.АВ?')
                        'question: your question
        - 'end: for quit'
________________________________________________________________________________________________
: end
```
## Notes
- Ensure the server's URL and port are correctly configured in the client.
- Follow the provided format for commands and inputs.
- Handle any errors or exceptions gracefully during usage.

The `client.py` file provides a simple yet effective means of interacting with the text document chunking and question answering application server, enabling users to seamlessly add documents and ask questions using the CLI interface.
